{"version":3,"file":"extension.js","mappings":"23BAIA,oBAAyBA,GAExBC,QAAQC,IAAI,oDAGZ,IAAIC,EAAaC,EAAOC,SAASC,gBAAgB,8BAA+BC,UAE/E,MAAMC,EAAgBJ,EAAOK,OAAOC,oBAAoB,kBACxDF,EAAcG,MAAK,GACnBH,EAAcI,WAAW,0CAGzB,MAAMC,EAAmBT,EAAOU,UAAUD,iBAC1C,IAAKA,GAAgD,IAA5BA,EAAiBE,OAIzC,OAHAX,EAAOK,OAAOO,iBAAiB,kEAC/BR,EAAcI,WAAW,yCACzBJ,EAAcI,WAAW,wCAI1B,MAAMK,EAAWJ,EAAiB,GAAGK,IAAIC,OAKnCC,QAAoBhB,EAAOK,OAAOY,aAAa,CACpDC,OAAQ,8EACRC,YAAa,8DAEd,IAAIC,EAAsB,GACtBJ,IAAgBK,MAAMC,SAASN,MAClCI,EAAY,CAAC,WAAYJ,IAI1B,MACMO,QAAmBvB,EAAOK,OAAOmB,cADd,CAAC,OAAQ,UAAW,YAAa,UACa,CACtEL,YAAa,8FACbM,aAAa,IAEd,IAAIC,EAAqB,GACrBH,IACHG,EAAW,CAAC,UAAWH,IAQxB,IAAII,EAAqB,GACP,cALM3B,EAAOK,OAAOmB,cAAc,CAAC,MAAO,MAAO,CAClEI,MAAO,gDACPT,YAAa,SAIbQ,EAAW,CAAC,YAOb,MAAME,EAAmBC,EAAKC,KAAKnC,EAAQoC,cAAe,MAAO,iBAAkB,mBAG7EC,EAAkC,UAArBC,QAAQC,SAAuB,SAAW,UAEvDC,EAAO,CACZP,KACGT,KACAM,KACAC,GAGJvB,EAAcI,WAAW,cAAcyB,KAAcG,EAAKL,KAAK,QAC/D3B,EAAcI,WAAW,iBAAiBK,KAC1CT,EAAcI,WAAW,wCAEzB,IAEC,MAAM6B,GAAgB,IAAAC,OAAML,EAAYG,EAAM,CAAEG,IAAK1B,IAGrDwB,EAAcG,OAAOC,GAAG,OAASC,IAChCtC,EAAcuC,OAAOD,EAAKE,cAI3BP,EAAcQ,OAAOJ,GAAG,OAASC,IAChCtC,EAAcuC,OAAOD,EAAKE,YAE1B5C,EAAOK,OAAOO,iBAAiB,yBAAyB8B,EAAKE,WAAWE,MAAM,MAAM,QAIrFT,EAAcI,GAAG,QAAUM,IACb,IAATA,GACH/C,EAAOK,OAAO2C,uBAAuB,yDACrC5C,EAAcI,WAAW,iDAEzBR,EAAOC,SAASgD,eAAe,4CAE/BjD,EAAOK,OAAOO,iBAAiB,2CAA2CmC,wCAC1E3C,EAAcI,WAAW,2CAA2CuC,OAErE3C,EAAcI,WAAW,0CAG1B6B,EAAcI,GAAG,QAAUS,IAC1BlD,EAAOK,OAAOO,iBAAiB,kCAAkCsC,EAAIC,4DACrE/C,EAAcI,WAAW,iCAAiC0C,EAAIC,WAC9D/C,EAAcI,WAAW,yCAG3B,CAAE,MAAO4C,GACRpD,EAAOK,OAAOO,iBAAiB,iCAAiCwC,EAAMD,WACtE/C,EAAcI,WAAW,qBAAqB4C,EAAMD,WACpD/C,EAAcI,WAAW,uCAC1B,IAGDZ,EAAQyD,cAAcC,KAAKvD,EAC5B,EAEA,wBAA+B,EA7H/B,kBACA,YACA,Q,UCFAwD,EAAOC,QAAUC,QAAQ,gB,UCAzBF,EAAOC,QAAUC,QAAQ,S,UCAzBF,EAAOC,QAAUC,QAAQ,O,GCCrBC,EAA2B,CAAC,ECE5BC,EDCJ,SAASC,EAAoBC,GAE5B,IAAIC,EAAeJ,EAAyBG,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAaN,QAGrB,IAAID,EAASG,EAAyBG,GAAY,CAGjDL,QAAS,CAAC,GAOX,OAHAQ,EAAoBH,GAAUI,KAAKV,EAAOC,QAASD,EAAQA,EAAOC,QAASI,GAGpEL,EAAOC,OACf,CCnB0BI,CAAoB,K","sources":[".././src/extension.ts","../external node-commonjs \"child_process\"","../external commonjs \"vscode\"","../external node-commonjs \"path\"","../webpack/bootstrap","../webpack/startup"],"sourcesContent":["import * as vscode from 'vscode';\nimport * as path from 'path';\nimport { spawn } from 'child_process';\n\nexport function activate(context: vscode.ExtensionContext) {\n\n\tconsole.log('Congratulations, \"centrim-docgen\" is now active!');\n\n\t// The command ID must match the one in package.json\n\tlet disposable = vscode.commands.registerCommand('centrim-docgen.generateDocs', async () => {\n\t\t// Create an output channel to show script progress\n\t\tconst outputChannel = vscode.window.createOutputChannel(\"Centrim DocGen\");\n\t\toutputChannel.show(true); // Show the channel immediately\n\t\toutputChannel.appendLine(\"--- Centrim DocGen Session Started ---\");\n\n\t\t// Get the current workspace folder path\n\t\tconst workspaceFolders = vscode.workspace.workspaceFolders;\n\t\tif (!workspaceFolders || workspaceFolders.length === 0) {\n\t\t\tvscode.window.showErrorMessage(\"No workspace folder open. Please open a Git repository folder.\");\n\t\t\toutputChannel.appendLine(\"Error: No workspace folder open.\");\n\t\t\toutputChannel.appendLine(\"--- Centrim DocGen Session Ended ---\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst repoPath = workspaceFolders[0].uri.fsPath; // Get the path of the first workspace folder\n\n\t\t// --- Collect User Inputs ---\n\n\t\t// 1. Get --diffno (optional)\n\t\tconst diffnoInput = await vscode.window.showInputBox({\n\t\t\tprompt: \"Enter number of recent diffs to process (e.g., 5). Leave empty for default.\",\n\t\t\tplaceHolder: \"Default: 1 (latest) if refactoring.md exists, 5 otherwise\"\n\t\t});\n\t\tlet diffnoArg: string[] = [];\n\t\tif (diffnoInput && !isNaN(parseInt(diffnoInput))) {\n\t\t\tdiffnoArg = ['--diffno', diffnoInput];\n\t\t}\n\n\t\t// 2. Get --model (optional, with quick pick suggestions)\n\t\tconst modelSuggestions = ['phi3', 'mistral', 'tinyllama', 'llama3']; // Common Ollama models\n\t\tconst modelInput = await vscode.window.showQuickPick(modelSuggestions, {\n\t\t\tplaceHolder: \"Select Ollama model (e.g., 'phi3') or type custom name. Leave empty for interactive prompt.\",\n\t\t\tcanPickMany: false\n\t\t});\n\t\tlet modelArg: string[] = [];\n\t\tif (modelInput) {\n\t\t\tmodelArg = ['--model', modelInput];\n\t\t}\n\n\t\t// 3. Get --watch (optional)\n\t\tconst watchMode = await vscode.window.showQuickPick(['Yes', 'No'], {\n\t\t\ttitle: \"Enable --watch mode? (Show raw Ollama output)\",\n\t\t\tplaceHolder: \"No\"\n\t\t});\n\t\tlet watchArg: string[] = [];\n\t\tif (watchMode === 'Yes') {\n\t\t\twatchArg = ['--watch'];\n\t\t}\n\n\t\t// --- Prepare Python Script Execution ---\n\n\t\t// Path to your Python script within the extension\n\t\t// Ensure this path matches where you placed git_doc_tool.py\n\t\tconst pythonScriptPath = path.join(context.extensionPath, 'src', 'python_scripts', 'git_doc_tool.py');\n\n\t\t// Determine the Python executable\n\t\tconst pythonExec = process.platform === 'win32' ? 'python' : 'python3';\n\n\t\tconst args = [\n\t\t\tpythonScriptPath,\n\t\t\t...diffnoArg,\n\t\t\t...modelArg,\n\t\t\t...watchArg\n\t\t];\n\n\t\toutputChannel.appendLine(`Executing: ${pythonExec} ${args.join(' ')}`);\n\t\toutputChannel.appendLine(`In directory: ${repoPath}`);\n\t\toutputChannel.appendLine(\"------------------------------------\");\n\n\t\ttry {\n\t\t\t// Spawn the Python script\n\t\t\tconst pythonProcess = spawn(pythonExec, args, { cwd: repoPath });\n\n\t\t\t// Pipe Python script's stdout to VS Code output channel\n\t\t\tpythonProcess.stdout.on('data', (data) => {\n\t\t\t\toutputChannel.append(data.toString());\n\t\t\t});\n\n\t\t\t// Pipe Python script's stderr to VS Code output channel\n\t\t\tpythonProcess.stderr.on('data', (data) => {\n\t\t\t\toutputChannel.append(data.toString());\n\t\t\t\t// Show error message in a toast, but only the first line to avoid spam\n\t\t\t\tvscode.window.showErrorMessage(`Centrim DocGen Error: ${data.toString().split('\\n')[0]}`);\n\t\t\t});\n\n\t\t\t// Handle process exit\n\t\t\tpythonProcess.on('close', (code) => {\n\t\t\t\tif (code === 0) {\n\t\t\t\t\tvscode.window.showInformationMessage('Centrim DocGen: Documentation generated successfully!');\n\t\t\t\t\toutputChannel.appendLine(\"Centrim DocGen: Script finished successfully.\");\n\t\t\t\t\t// Optional: Refresh the explorer if refactoring.md is open/visible\n\t\t\t\t\tvscode.commands.executeCommand('workbench.files.action.refreshExplorer');\n\t\t\t\t} else {\n\t\t\t\t\tvscode.window.showErrorMessage(`Centrim DocGen: Script exited with code ${code}. Check output channel for details.`);\n\t\t\t\t\toutputChannel.appendLine(`Centrim DocGen: Script exited with code ${code}.`);\n\t\t\t\t}\n\t\t\t\toutputChannel.appendLine(\"--- Centrim DocGen Session Ended ---\");\n\t\t\t});\n\n\t\t\tpythonProcess.on('error', (err) => {\n\t\t\t\tvscode.window.showErrorMessage(`Failed to start Python script: ${err.message}. Make sure Python is installed and in your PATH.`);\n\t\t\t\toutputChannel.appendLine(`Error starting Python script: ${err.message}`);\n\t\t\t\toutputChannel.appendLine(\"--- Centrim DocGen Session Ended ---\");\n\t\t\t});\n\n\t\t} catch (error: any) {\n\t\t\tvscode.window.showErrorMessage(`An unexpected error occurred: ${error.message}`);\n\t\t\toutputChannel.appendLine(`Unexpected error: ${error.message}`);\n\t\t\toutputChannel.appendLine(\"--- Centrim DocGen Session Ended ---\");\n\t\t}\n\t});\n\n\tcontext.subscriptions.push(disposable);\n}\n\nexport function deactivate() { }\n","module.exports = require(\"child_process\");","module.exports = require(\"vscode\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(265);\n"],"names":["context","console","log","disposable","vscode","commands","registerCommand","async","outputChannel","window","createOutputChannel","show","appendLine","workspaceFolders","workspace","length","showErrorMessage","repoPath","uri","fsPath","diffnoInput","showInputBox","prompt","placeHolder","diffnoArg","isNaN","parseInt","modelInput","showQuickPick","canPickMany","modelArg","watchArg","title","pythonScriptPath","path","join","extensionPath","pythonExec","process","platform","args","pythonProcess","spawn","cwd","stdout","on","data","append","toString","stderr","split","code","showInformationMessage","executeCommand","err","message","error","subscriptions","push","module","exports","require","__webpack_module_cache__","__webpack_exports__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","call"],"sourceRoot":""}